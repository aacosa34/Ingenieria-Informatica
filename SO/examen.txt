COSAS A TENER EN CUENTA PARA EL EXAMEN

Dos terminales disponibles (bash y fedora)

Cosas que les gusta preguntar:

- at y cron. Se pregunta más sobre cron. Comandos de monitorización (uso de cpu con vmstat, free, htop, por ej.)

- creación de usuarios con adduser y usermod y cambiar sus parámetros. chage

- enlaces simbólicos y duros

- ordenes ps y nice/renice

- /etc/fstab -> indica que SA se van a montar al inicio del sistema

POSIBLES EJERCICIOS DE EXAMEN:
-----------------------------------------------------------------------------------------

Ejercicio 1: Creación y gestión de ususarios

Un bash shell restringido (bash -r) permite limitar algunas acciones del usuario que los usa, por ejemplo, no permite cambiar de directorio, ni utilizar nombres de archivos que contienen una barra /, ni cambiar las variables PATH y SHELL, ni redirigir las entradas/salidas, ni tampoco definir funciones. Se pide crear un usuario, denominado anonimo, que debe usar un shell restringido, tiene un UID con valor 590 y pertenecerá a un grupo denominado limitados con GID 1010. Su directorio home será /home/anonimo y su cuenta debe estar activa solo 10 días.

~$ groupadd limitados --gid 1010 # Creación del grupo 'limitados'
~$ adduser anonimo --uid 590 --shell /bin/rbash --home /home/anonimo --gid 1010 # Creación del usuario
~$ chage -E 10 anonimo # Fecha de expiración en 10 días desde su creacion
------------------------------------------------------------------------------------------

Ejercicio 2: 

Crea un script que devuelva exclusivamente la información sobre la cantidad de espacio libre y ocupado tanto de la memoria principal como del espacio de intercambio de tu sistema (Ubuntu).

~$ touch free.sh # Tiene dentro:

#!/bin/bash

free | awk '/total/{ print "\t" $2 "\t" $3} /Mem:|Swap:/{ print $1 "\t" $3 "\t" $4}'

~$ ./free.sh
-----------------------------------------------------------------------------------------

Ejercicio 3:

Crea un directorio llamado log en tu directorio home y consigue que todos los Viernes a las 2 horas y 5 minutos durante los meses de Marzo, Abril y Mayo, se ejecute el guión del apartado anterior y se guarden los resultados en los archivos creados ( log ), de tal forma que se pueda observar la evolución de la memoria. Para verificar que funciona pruébalo especificando "cada minuto".

~$ mkdir log
~$ sudo nano free.sh # Lo editamos

#!/bin/bash

free > /home/adrian/log/free-`date +%Y-%j-%T`.txt

~$ crontab -e
* * * * * /home/adrian/free.sh

~$ service cron status # Para ver su estado
~$ crontab -e
5 2 * 3-5 5 /home/adrian/free.sh
-----------------------------------------------------------------------------------------

Ejercicio 4:

Indica el significado de los sigiuentes campos mostrados por la orden top : 'us', 'ni' y 'si'. Además indica para un determinado proceso de ejemplo cuáles son las columnas que muestran: el tamaño de la memoria RAM que realmente utiliza el proceso y el tamaño de memoria que puede compartir con otros procesos.

~$ man top # Lo pone explícitamente en el manual
~$ ps -el
---------------------------------------------------------------------------------------

Ejercicio 5:

Crear en el directorio /root un enlace duro y un enlace simbólico a cualesquiera de los programa que aparecen en /bin. Una vez creados hacer un ls -l del directorio /root y pegar el resultado. Idem para la orden stat sobre estos dos archivos.

~$ sudo su
~# ln /bin/ls hardlinkls
~# ln -s /bin/ls softlinkls
~# stat hardlinkls
~# stat softlinkls
-----------------------------------------------------------------------------------------

Ejercicio 6: 

Modifique los elementos que sean necesarios en el sistema UML para cada vez que arrancamos la máquina virtual se realice el montaje de nuestro directorio home del anfitrión en un directorio de la máquina virtual en lugar de tener que hacerlo a mano.



Ejercicio 7: 

Crear una sistema de archivos de tipo ext3 dentro de un archivo utilizando el dispositivo /dev/loop. Este sistema de archivos debe tener 15 MB de tamaño y un tamaño de bloque de 4KB. Tras su creación hay que montarlo de solo lectura y sin que se puedan ejecutar archivos desde el. Indicar las ordenes necesarias para realizar estos pasos y mostrar la información de los metadatos del sistema de archivos creado.


